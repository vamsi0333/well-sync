{% extends "layout.html" %}

{% block content %}
<div class="space-y-8">
  <!-- Header Section -->
  <div class="text-center mb-8">
    <h1 class="text-4xl font-extrabold text-gray-900 dark:text-white mb-2">IT Resources</h1>
    <p class="text-lg text-gray-600 dark:text-gray-400">Download guides, manuals, and helpful documentation</p>
  </div>

  <!-- Resources Grid -->
  <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for item in resources %}
      <div class="group bg-white/90 dark:bg-gray-900/90 p-6 rounded-2xl shadow-xl backdrop-blur hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-1 border border-gray-200 dark:border-gray-700">
        <div class="flex items-start mb-4">
          <div class="w-12 h-12 bg-gradient-to-br from-primary to-accent rounded-xl flex items-center justify-center mr-4 group-hover:scale-110 transition-transform">
            <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
            </svg>
          </div>
          <div class="flex-1">
            <h2 class="text-xl font-bold text-gray-900 dark:text-white mb-2">{{ item.title }}</h2>
            <p class="text-gray-600 dark:text-gray-400 text-sm leading-relaxed mb-4">{{ item.description }}</p>
            <a href="{{ item.link }}" target="_blank" rel="noopener noreferrer" 
              class="inline-flex items-center text-primary font-semibold hover:text-primary-dark transition group-hover:translate-x-1">
              Download/View
              <svg class="w-4 h-4 ml-1 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
              </svg>
            </a>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>

  <!-- Quick Links Section -->
  <div class="bg-white/90 dark:bg-gray-900/90 p-6 rounded-2xl shadow-xl backdrop-blur border border-gray-200 dark:border-gray-700">
    <h3 class="text-xl font-bold text-gray-900 dark:text-white mb-6 flex items-center">
      <svg class="w-6 h-6 mr-2 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"></path>
      </svg>
      Quick Links
    </h3>
    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4">
      <a href="/faqs" class="group p-4 bg-gray-50 dark:bg-gray-800 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 transition">
        <div class="flex items-center">
          <div class="w-10 h-10 bg-blue-100 dark:bg-blue-900 rounded-lg flex items-center justify-center mr-3 group-hover:scale-110 transition-transform">
            <svg class="w-5 h-5 text-blue-600 dark:text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
            </svg>
          </div>
          <span class="font-medium text-gray-900 dark:text-white">FAQs</span>
        </div>
      </a>
      
      <a href="/catalog" class="group p-4 bg-gray-50 dark:bg-gray-800 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 transition">
        <div class="flex items-center">
          <div class="w-10 h-10 bg-green-100 dark:bg-green-900 rounded-lg flex items-center justify-center mr-3 group-hover:scale-110 transition-transform">
            <svg class="w-5 h-5 text-green-600 dark:text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
            </svg>
          </div>
          <span class="font-medium text-gray-900 dark:text-white">Service Catalog</span>
        </div>
      </a>
      
      <a href="/system-status" class="group p-4 bg-gray-50 dark:bg-gray-800 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 transition">
        <div class="flex items-center">
          <div class="w-10 h-10 bg-yellow-100 dark:bg-yellow-900 rounded-lg flex items-center justify-center mr-3 group-hover:scale-110 transition-transform">
            <svg class="w-5 h-5 text-yellow-600 dark:text-yellow-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path>
            </svg>
          </div>
          <span class="font-medium text-gray-900 dark:text-white">System Status</span>
        </div>
      </a>
      
      <a href="/assistant" class="group p-4 bg-gray-50 dark:bg-gray-800 rounded-xl hover:bg-gray-100 dark:hover:bg-gray-700 transition">
        <div class="flex items-center">
          <div class="w-10 h-10 bg-purple-100 dark:bg-purple-900 rounded-lg flex items-center justify-center mr-3 group-hover:scale-110 transition-transform">
            <svg class="w-5 h-5 text-purple-600 dark:text-purple-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
            </svg>
          </div>
          <span class="font-medium text-gray-900 dark:text-white">AI Assistant</span>
        </div>
      </a>
    </div>
  </div>

  <!-- Contact Support -->
  <div class="bg-gradient-to-r from-primary to-accent p-6 rounded-2xl shadow-xl text-white">
    <h3 class="text-xl font-bold mb-3 flex items-center">
      <svg class="w-6 h-6 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M18.364 5.636l-3.536 3.536m0 5.656l3.536 3.536M9.172 9.172L5.636 5.636m3.536 9.192L5.636 18.364M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-5 0a4 4 0 11-8 0 4 4 0 018 0z"></path>
      </svg>
      Need Additional Resources?
    </h3>
    <p class="text-white/90 mb-4">Can't find what you're looking for? Contact our IT support team for additional resources and assistance.</p>
    <div class="flex flex-wrap gap-3">
      <a href="/submit-ticket" class="bg-white/20 backdrop-blur-sm px-4 py-2 rounded-lg font-semibold hover:bg-white/30 transition">
        Submit Ticket
      </a>
      <a href="/submit-request" class="bg-white/20 backdrop-blur-sm px-4 py-2 rounded-lg font-semibold hover:bg-white/30 transition">
        Service Request
      </a>
    </div>
  </div>

  <!-- AI Assistant Widget -->
  <div class="bg-gradient-to-r from-green-500 to-green-600 rounded-2xl p-6 text-white shadow-xl">
    <div class="flex items-center justify-between">
      <div class="flex-1">
        <h3 class="text-xl font-bold mb-2 flex items-center">
          <span class="mr-2">ðŸ¤–</span> AI Assistant
        </h3>
        <p class="text-green-100 mb-4">Need help finding resources? Ask me anything!</p>
        <div class="flex gap-3">
          <input type="text" id="ai-question" placeholder="Ask about IT resources..." 
                 class="flex-1 px-4 py-2 rounded-lg bg-white/20 backdrop-blur-sm text-white placeholder-green-200 border border-white/30 focus:border-white/50 focus:outline-none">
          <button onclick="askAI()" class="bg-white/20 backdrop-blur-sm px-6 py-2 rounded-lg font-semibold hover:bg-white/30 transition-all duration-300">
            Ask AI
          </button>
        </div>
        <div id="ai-response" class="hidden bg-white/10 backdrop-blur-sm rounded-lg p-4 mt-3">
          <p id="ai-answer" class="text-green-100"></p>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
function askAI() {
    const question = document.getElementById('ai-question').value;
    if (!question.trim()) {
        alert('Please enter a question');
        return;
    }

    fetch('/api/ai-assistant', {
        method: 'POST',
        headers: {
            'Content-Type': 'application/json',
        },
        body: JSON.stringify({ question: question })
    })
    .then(response => response.json())
    .then(data => {
        document.getElementById('ai-answer').textContent = data.answer;
        document.getElementById('ai-response').classList.remove('hidden');
    })
    .catch(error => {
        console.error('Error:', error);
        document.getElementById('ai-answer').textContent = 'Sorry, I encountered an error. Please try again.';
        document.getElementById('ai-response').classList.remove('hidden');
    });
}

// Allow Enter key to submit
document.getElementById('ai-question').addEventListener('keypress', function(e) {
    if (e.key === 'Enter') {
        askAI();
    }
});
</script>
{% endblock %}
