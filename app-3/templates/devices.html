{% extends "layout.html" %}
{% block content %}
<div class="max-w-5xl mx-auto space-y-10">
  <!-- Hero Card -->
  <div class="bg-gradient-to-r from-primary to-accent rounded-3xl shadow-xl p-8 flex items-center space-x-6 animate-fade-in">
    <div class="flex-shrink-0 text-5xl">ğŸ’»</div>
    <div class="flex-1">
      <h1 class="text-3xl sm:text-4xl font-extrabold text-white mb-1">Device Tracking</h1>
      <p class="text-lg text-white/90">Track all company devices, manage lending, and monitor returns.</p>
    </div>
  </div>
  <!-- Add Device Form -->
  <form method="post" class="bg-white dark:bg-gray-900 rounded-2xl shadow-lg p-8 space-y-6 animate-fade-in">
    <div class="grid grid-cols-1 sm:grid-cols-3 gap-6">
      <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Device Name</label>
        <input type="text" name="name" required class="w-full rounded-lg border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-primary focus:border-primary">
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Type</label>
        <select name="type" class="w-full rounded-lg border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-primary focus:border-primary">
          <option value="Laptop">ğŸ’» Laptop</option>
          <option value="Phone">ğŸ“± Phone</option>
          <option value="Tablet">ğŸ“± Tablet</option>
          <option value="Monitor">ğŸ–¥ï¸ Monitor</option>
          <option value="Other">ğŸ”§ Other</option>
        </select>
      </div>
      <div>
        <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1">Notes</label>
        <input type="text" name="notes" class="w-full rounded-lg border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-100 focus:ring-primary focus:border-primary">
      </div>
    </div>
    <div class="flex justify-end mt-8">
      <button type="submit" class="px-6 py-3 rounded-lg bg-gradient-to-r from-primary to-accent text-white font-bold shadow hover:shadow-lg transition-all duration-300 transform hover:-translate-y-1">Add Device</button>
    </div>
  </form>
  <!-- Devices Table -->
  <div class="mt-12 animate-fade-in">
    <h2 class="text-2xl font-bold text-primary mb-4 flex items-center"><span class="mr-2">ğŸ“‹</span> All Devices</h2>
    <div class="overflow-x-auto rounded-2xl shadow-xl bg-white dark:bg-gray-900">
      <table class="min-w-full divide-y divide-gray-200 dark:divide-gray-700">
        <thead>
          <tr>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Name</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Type</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Status</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Assigned To</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Lent Date</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Return Date</th>
            <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 dark:text-gray-300 uppercase tracking-wider">Notes</th>
            <th class="px-6 py-3"></th>
          </tr>
        </thead>
        <tbody class="bg-white dark:bg-gray-900 divide-y divide-gray-200 dark:divide-gray-700">
          {% for d in devices %}
          <tr>
            <td class="px-6 py-4 whitespace-nowrap text-gray-900 dark:text-white">{{ d.name }}</td>
            <td class="px-6 py-4 whitespace-nowrap">{{ d.type }}</td>
            <td class="px-6 py-4 whitespace-nowrap">
              <span class="px-3 py-1 rounded-full text-xs font-bold
                {% if d.status == 'available' %}bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200
                {% elif d.status == 'lent' %}bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200
                {% endif %}">
                {{ d.status|capitalize }}
              </span>
            </td>
            <td class="px-6 py-4 whitespace-nowrap">{{ d.assigned_to or '-' }}</td>
            <td class="px-6 py-4 whitespace-nowrap">{{ d.lent_date or '-' }}</td>
            <td class="px-6 py-4 whitespace-nowrap">{{ d.return_date or '-' }}</td>
            <td class="px-6 py-4 whitespace-nowrap">{{ d.notes or '-' }}</td>
            <td class="px-6 py-4 whitespace-nowrap">
              {% if d.status == 'available' %}
              <form method="post" action="/devices/lend/{{ d.id }}" class="flex space-x-2 items-center">
                <input type="text" name="assigned_to" placeholder="Assign to (email)" required class="rounded-lg border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-100 px-2 py-1 w-32">
                <input type="date" name="lent_date" required class="rounded-lg border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-100 px-2 py-1">
                <input type="text" name="notes" placeholder="Notes" class="rounded-lg border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-100 px-2 py-1 w-24">
                <button type="submit" class="px-3 py-1 rounded-lg bg-gradient-to-r from-primary to-accent text-white font-bold shadow hover:shadow-lg transition-all duration-300">Lend</button>
              </form>
              {% elif d.status == 'lent' %}
              <form method="post" action="/devices/return/{{ d.id }}" class="flex space-x-2 items-center">
                <input type="date" name="return_date" required class="rounded-lg border-gray-300 dark:border-gray-700 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-gray-100 px-2 py-1">
                <button type="submit" class="px-3 py-1 rounded-lg bg-gradient-to-r from-accent to-primary text-white font-bold shadow hover:shadow-lg transition-all duration-300">Mark Returned</button>
              </form>
              {% endif %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %} 