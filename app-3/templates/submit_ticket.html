{% extends "layout.html" %}

{% block content %}
<div class="space-y-8">
  <!-- Header Section -->
  <div class="text-center mb-8">
    <h1 class="text-4xl font-extrabold text-gray-900 dark:text-white mb-2">Submit a New Ticket</h1>
    <p class="text-lg text-gray-600 dark:text-gray-400">Create a support ticket for IT assistance</p>
  </div>

  <!-- Ticket Form -->
  <div class="max-w-2xl mx-auto">
    <div class="bg-white/90 dark:bg-gray-900/90 p-8 rounded-2xl shadow-xl backdrop-blur border border-gray-200 dark:border-gray-700">
      <div class="flex items-center mb-6">
        <div class="w-12 h-12 bg-gradient-to-br from-primary to-accent rounded-xl flex items-center justify-center mr-4">
          <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6"></path>
          </svg>
        </div>
        <div>
          <h2 class="text-xl font-bold text-gray-900 dark:text-white">Support Ticket</h2>
          <p class="text-gray-600 dark:text-gray-400">We'll get back to you as soon as possible</p>
        </div>
      </div>

      <form method="POST" action="/submit-ticket" class="space-y-6" id="ticket-form">
    <div>
          <label for="title" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Issue Title *</label>
          <input type="text" name="title" id="title" required 
            class="w-full p-4 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-primary transition"
            placeholder="Brief description of your issue" />
    </div>

    <div>
          <label for="priority" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Priority Level *</label>
          <select name="priority" id="priority" required
            class="w-full p-4 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-primary transition">
            <option value="">Select priority level</option>
            <option value="low">Low - General inquiry or non-urgent issue</option>
            <option value="medium">Medium - Affects work but not critical</option>
            <option value="high">High - Critical issue affecting productivity</option>
      </select>
    </div>

    <div>
          <label for="date" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Date *</label>
          <input type="date" name="date" id="date" required 
            class="w-full p-4 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-primary transition" />
        </div>

        <div>
          <label for="description" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Description</label>
          <textarea name="description" id="description" rows="4" 
            class="w-full p-4 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-primary transition resize-none"
            placeholder="Provide additional details about your issue..."></textarea>
        </div>

        <div>
          <label for="attachments" class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">Attachments (Optional)</label>
          <input type="file" name="attachments" id="attachments" multiple accept=".png,.jpg,.jpeg,.gif,.pdf,.doc,.docx"
            class="w-full p-4 bg-gray-50 dark:bg-gray-800 text-gray-900 dark:text-white rounded-xl border border-gray-300 dark:border-gray-600 focus:outline-none focus:ring-2 focus:ring-primary transition file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-primary file:text-white hover:file:bg-primary-dark">
          <p class="text-xs text-gray-500 dark:text-gray-400 mt-1">Supported formats: PNG, JPG, GIF, PDF, DOC, DOCX (Max 5 files)</p>
    </div>

        <button type="submit" id="submit-btn"
          class="w-full bg-gradient-to-r from-primary to-accent text-white py-4 rounded-xl font-semibold shadow-lg hover:shadow-xl transition-all duration-300 transform hover:-translate-y-1 flex items-center justify-center gap-2">
          <span id="submit-btn-text">Submit Ticket</span>
          <svg id="submit-spinner" class="w-5 h-5 animate-spin hidden" fill="none" viewBox="0 0 24 24">
            <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
            <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8v8z"></path>
          </svg>
    </button>
  </form>
    </div>

    <!-- Help Section -->
    <div class="mt-8 bg-gradient-to-r from-blue-50 to-indigo-50 dark:from-blue-900/20 dark:to-indigo-900/20 p-6 rounded-2xl border border-blue-200 dark:border-blue-800">
      <h3 class="text-lg font-semibold text-blue-900 dark:text-blue-100 mb-3 flex items-center">
        <svg class="w-5 h-5 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
        </svg>
        Need Help?
      </h3>
      <p class="text-blue-800 dark:text-blue-200 text-sm mb-4">Before submitting a ticket, you might find quick answers in our FAQs or by asking our AI Assistant.</p>
      <div class="flex flex-col sm:flex-row gap-3">
        <a href="/faqs" class="inline-flex items-center px-4 py-2 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 font-medium rounded-lg hover:bg-blue-200 dark:hover:bg-blue-800 transition">
          <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
          </svg>
          Browse FAQs
        </a>
        <a href="/assistant" class="inline-flex items-center px-4 py-2 bg-blue-100 dark:bg-blue-900 text-blue-700 dark:text-blue-300 font-medium rounded-lg hover:bg-blue-200 dark:hover:bg-blue-800 transition">
          <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"></path>
          </svg>
          Ask AI Assistant
        </a>
      </div>
    </div>
  </div>
</div>

<script>
  // Show spinner on submit
  document.getElementById('ticket-form').addEventListener('submit', function() {
    document.getElementById('submit-btn-text').classList.add('hidden');
    document.getElementById('submit-spinner').classList.remove('hidden');
  });

  // Set default date to today
  document.getElementById('date').value = new Date().toISOString().split('T')[0];
</script>
{% endblock %}
