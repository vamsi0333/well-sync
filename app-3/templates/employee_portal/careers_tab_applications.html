<div class="space-y-6 w-full">
  {% for app in applications %}
    {% set job = (jobs | selectattr('id', 'equalto', app.job_id) | list | first) %}
    <div class="bg-white/90 dark:bg-gray-900/90 rounded-2xl shadow-lg p-6 flex flex-col md:flex-row md:items-center gap-4 hover:shadow-2xl transition-all duration-300 border border-gray-100 dark:border-gray-800">
      <div class="flex-1">
        <div class="flex items-center gap-4 mb-1">
          <div class="w-10 h-10 rounded-full bg-gradient-to-br from-primary to-accent flex items-center justify-center text-xl font-bold text-white shadow">{{ job.title[0] if job else '?' }}</div>
          <span class="font-bold text-lg text-primary">{{ job.title if job else 'Unknown Job' }}</span>
          <span class="ml-2 px-2 py-1 rounded bg-green-100 text-green-600 text-xs font-semibold">{{ app.status|capitalize }}</span>
        </div>
        <div class="text-gray-500 dark:text-gray-400 text-sm">Applied for: {{ job.type if job else '' }} • {{ job.location if job else '' }}</div>
      </div>
      <div class="flex gap-2 mt-2 md:mt-0">
        <button type="button" class="flex items-center gap-1 px-3 py-2 rounded-lg bg-gray-100 dark:bg-gray-800 text-accent font-semibold shadow hover:bg-accent hover:text-white transition-all duration-200 focus:outline-none view-details-btn" data-job-id="{{ job.id if job else '' }}" aria-label="View job details"><span>ℹ️</span> Details</button>
        {% if app.status != 'withdrawn' %}
        <form method="post">
          <input type="hidden" name="withdraw_app" value="{{ app.job_id }}">
          <button class="flex items-center gap-2 px-4 py-2 rounded-lg bg-gradient-to-r from-red-500 to-accent text-white font-bold shadow hover:shadow-lg transition-all duration-200"><span>❌</span> Withdraw</button>
        </form>
        {% endif %}
      </div>
    </div>
  {% endfor %}
</div>
{% if not applications %}
  <div class="text-gray-400 text-center py-12">No applications yet. Apply to jobs to see them here.</div>
{% endif %} 